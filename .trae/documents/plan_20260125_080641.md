# WeBot UI 改进计划

## 问题分析

根据代码分析，发现以下问题需要解决：

1. 主题配置已保存但加载逻辑需要完善
2. UI样式需要优化为macOS风格
3. 部分控件主题切换后颜色适配不完整
4. 悬浮窗配置未保存到配置文件
5. 无边框窗口使用圆角，需要改为直角
6. mainwindow\.cpp中包含大量UI修改代码，应移至.ui文件

## 实施步骤

### 1. 修改mainwindow\.ui文件

* 清理重复的样式定义（当前有重复的QGroupBox、QPushButton等样式）

* 将所有控件的样式属性统一移到.ui文件中

* 为所有控件添加objectName以便主题管理器识别

* 修改窗口边框为直角矩形（border-radius: 0px）

### 2. 修改mainwindow\.cpp

* 移除所有在构造函数中手动设置的样式代码（51-90行）

* 移除重复的按钮文本和大小设置代码

* 确保主题加载在初始化时正确执行

* 添加悬浮窗配置的保存和加载逻辑

### 3. 修改framelesswindow\.cpp

* 将圆角矩形改为直角矩形（paintEvent中的drawRoundedRect改为drawRect）

* 调整阴影效果以适配直角风格

* 修改标题栏圆角为直角

### 4. 修改floatingwindow\.cpp

* 将圆角进度条改为直角样式

* 调整绘制逻辑使用drawRect替代drawRoundedRect

### 5. 完善configmanager.cpp

* 确保悬浮窗配置（位置、大小、可见性）正确保存和加载

* 验证所有用户设置项都已包含在配置文件中

### 6. 优化thememanager.cpp

* 确保所有主题样式都使用直角矩形

* 统一所有控件的背景色和文字色定义

* 确保QLabel、QSpinBox、QComboBox、QLineEdit、QGroupBox在各主题下都有正确的颜色

### 7. 编译测试

* 使用MinGW x86 64bit编译项目

* 解决所有编译错误

* 运行测试验证所有功能正常

## 预期效果

* 所有UI控件使用macOS风格的直角设计

* 主题切换后所有控件颜色正确适配

* 悬浮窗配置正确保存和加载

* 代码更易维护，UI定义集中在.ui文件中

* 编译无错误，功能完整

