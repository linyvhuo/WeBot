# WeBot 主题系统及界面设计优化计划

## 一、主题系统优化

### 1.1 精简主题数量至5个
**修改文件**：`thememanager.h`, `thememanager.cpp`

**操作步骤**：
1. 修改 `Theme` 枚举，删除 `PurpleTheme` 和 `GreenTheme`
2. 添加 `SakuraTheme`（樱花主题）和 `WarmTheme`（暖色主题）
3. 删除 `getPurpleThemeStyle()` 和 `getGreenThemeStyle()` 方法
4. 添加 `getSakuraThemeStyle()` 和 `getWarmThemeStyle()` 方法
5. 更新 `initThemes()` 方法，移除紫色和绿色主题，添加樱花和暖色主题
6. 更新 `getThemeName()` 方法，添加新主题名称
7. 在 `mainwindow.ui` 中更新 `themeCombo` 的选项：
   - 删除"紫色主题"和"绿色主题"
   - 添加"樱花主题"和"暖色主题"

**樱花主题设计**：
- 柔和的粉紫色渐变背景
- 温馨的樱花粉色点缀
- 优雅的按钮和控件样式
- 完整的控件覆盖（ComboBox、CheckBox、SpinBox等）

**暖色主题设计**：
- 温暖的橙黄色渐变背景
- 舒适的暖色调配色
- 活力四射的视觉效果
- 完整的控件覆盖

### 1.2 确保主题完整性
**修改文件**：`thememanager.cpp`

**操作步骤**：
- 确保所有5个主题都包含完整的控件样式：
  - QMainWindow（窗口背景、边框、圆角）
  - QPushButton（按钮、悬停、点击、禁用状态）
  - QLineEdit、QTextEdit（输入框、焦点状态）
  - QTabWidget、QTabBar（标签页）
  - QGroupBox（分组框、标题）
  - QLabel（标签）
  - QProgressBar（进度条）
  - QComboBox（下拉框）
  - QCheckBox（复选框）
  - QSpinBox、QDoubleSpinBox（数值输入框）
- 确保每个主题都有：
  - 渐变背景效果
  - 阴影和发光效果
  - 悬停和点击动画
  - 统一的圆角和间距

## 二、界面结构调整

### 2.1 解决主题切换功能重复问题
**修改文件**：`mainwindow.ui`, `mainwindow.cpp`, `mainwindow.h`

**操作步骤**：
1. **删除关于作者页面的主题设置**：
   - 删除 `themeGroup` GroupBox（第1764-1820行）
   - 删除所有主题按钮：`lightThemeButton`, `darkThemeButton`, `techThemeButton`, `purpleThemeButton`, `greenThemeButton`
   - 删除对应的槽函数声明和实现

2. **保留基础设置页面的主题选择**：
   - 保留 `themeCombo` ComboBox（第832行）
   - 更新选项为5个主题：浅色、深色、樱花、科技、暖色
   - 确保主题切换功能正常工作

### 2.2 运行状态显示调整
**修改文件**：`mainwindow.ui`, `mainwindow.cpp`, `mainwindow.h`

**操作步骤**：
1. **从基础设置页面移除运行状态**：
   - 删除 `statusGroup` GroupBox（第770-788行）
   - 删除 `statusLabel` 和 `progressLabel`

2. **创建底部栏**：
   - 在 `mainwindow.ui` 中添加底部栏布局
   - 包含运行状态显示（状态文字、进度条）
   - 放置在窗口底部，与主题切换分离

3. **更新MainWindow类**：
   - 在 `mainwindow.h` 中添加底部栏相关成员变量
   - 在 `mainwindow.cpp` 中实现底部栏初始化
   - 更新状态显示逻辑，使用底部栏显示

### 2.3 截图快捷键设置迁移
**修改文件**：`mainwindow.ui`, `mainwindow.cpp`, `mainwindow.h`

**操作步骤**：
1. **从基础设置页面移除截图快捷键**：
   - 删除 `screenshotShortcutLayout`（第625-686行）
   - 删除 `screenshotShortcutLabel`, `screenshotShortcutEdit`, `applyShortcutButton`
   - 删除 `saveConfigButton`（如果仅用于截图快捷键）

2. **迁移到高级设置模块**：
   - 在高级设置页面添加截图快捷键设置
   - 放置在现有的文件路径配置之后
   - 使用高级设置已有的保存机制（`saveAdvancedConfigButton`）

3. **更新槽函数**：
   - 删除 `on_applyShortcutButton_clicked()` 槽函数
   - 更新 `on_saveAdvancedConfigButton_clicked()` 以包含截图快捷键保存

## 三、控件优化

### 3.1 统一按钮尺寸
**修改文件**：`mainwindow.ui`

**操作步骤**：
1. **统一开始按钮和停止按钮尺寸**：
   - `startButton`：保持 228x44（第692-694行）
   - `stopButton`：修改为 228x44（当前为120x30，第708-710行）
   - 确保两者最小尺寸完全一致

2. **更新按钮样式**：
   - 在 `mainwindow.ui` 的样式表中统一按钮样式
   - 确保两个按钮的视觉效果一致

### 3.2 标题栏重新设计
**修改文件**：`framelesswindow.h`, `framelesswindow.cpp`

**操作步骤**：
1. **添加主题感知功能**：
   - 在 `FramelessWindow` 类中添加主题变化信号连接
   - 监听 `ThemeManager::themeChanged` 信号

2. **重新设计标题栏按钮样式**：
   - 修改 `createTitleButton()` 方法，支持主题样式
   - 为最小化、最大化、关闭按钮添加主题感知样式
   - 确保按钮样式符合当前主题：
     - 浅色主题：浅灰色按钮，深色图标
     - 深色主题：深灰色按钮，浅色图标
     - 樱花主题：樱花粉色按钮
     - 科技主题：青色发光按钮
     - 暖色主题：橙黄色按钮

3. **更新标题栏背景**：
   - 修改 `createTitleBar()` 中的样式表
   - 根据当前主题动态设置标题栏背景
   - 确保标题栏与窗口主题一致

4. **优化按钮交互效果**：
   - 添加悬停效果（颜色变化、阴影）
   - 添加点击效果（按下状态）
   - 确保所有主题下的按钮交互一致

## 四、主题一致性保证

### 4.1 主题切换同步
**修改文件**：`mainwindow.cpp`

**操作步骤**：
1. **连接主题变化信号**：
   - 在 `MainWindow` 构造函数中连接 `ThemeManager::themeChanged` 信号
   - 实现槽函数 `onThemeChanged(Theme theme)`

2. **更新所有UI元素**：
   - 在 `onThemeChanged()` 中更新：
     - 标题栏样式
     - 底部栏样式
     - 所有控件的样式
   - 确保切换主题时所有元素同步更新

### 4.2 样式表动态更新
**修改文件**：`thememanager.cpp`, `framelesswindow.cpp`

**操作步骤**：
1. **移除硬编码样式**：
   - 确保 `mainwindow.ui` 中没有硬编码的颜色值
   - 所有样式都通过 `ThemeManager` 动态应用

2. **主题感知样式**：
   - 标题栏按钮根据主题动态更新样式
   - 底部栏根据主题动态更新样式
   - 确保所有UI元素都响应主题变化

## 五、实施顺序

1. **第一阶段**：主题系统优化
   - 修改主题枚举和样式方法
   - 实现樱花主题和暖色主题
   - 更新主题选择器UI

2. **第二阶段**：界面结构调整
   - 删除重复的主题切换功能
   - 迁移运行状态到底部栏
   - 迁移截图快捷键到高级设置

3. **第三阶段**：控件优化
   - 统一按钮尺寸
   - 重新设计标题栏
   - 实现主题感知功能

4. **第四阶段**：测试和验证
   - 测试所有5个主题切换
   - 验证所有UI元素同步更新
   - 确保主题一致性

## 六、预期效果

- ✅ 主题数量精简至5个（浅色、深色、樱花、科技、暖色）
- ✅ 每个主题完整覆盖所有UI控件
- ✅ 主题切换功能无重复，仅保留一个入口
- ✅ 运行状态显示在底部栏，与主题切换分离
- ✅ 截图快捷键迁移到高级设置，利用已有保存机制
- ✅ 开始和停止按钮尺寸完全一致
- ✅ 标题栏按钮样式符合当前主题风格
- ✅ 所有UI元素在主题切换时同步更新