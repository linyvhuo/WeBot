# UI界面主题适配完整修复计划

## 问题分析

经过全面搜索，发现以下文件存在硬编码颜色，需要适配主题系统：

### 需要修改的文件

1. **screenshotselector.cpp** - 截图选择器
   - 硬编码青色（#00ffff）用于选择框和提示文字
   - 需要添加主题支持和主题变化响应

2. **clickcapturewidget.cpp** - 点击捕获窗口
   - 硬编码红色（Qt::red）用于十字准星
   - 需要添加主题支持和主题变化响应

3. **recognitionoverlay.cpp** - 识别覆盖层
   - 硬编码青色（#00ffff）用于识别框
   - 需要添加主题支持和主题变化响应

4. **framelesswindow.cpp** - 无边框窗口
   - 硬编码白色、红色等颜色用于标题栏和按钮
   - 需要添加主题支持和主题变化响应

## 修复步骤

### 第1步：修改 screenshotselector.h
- 添加主题管理器成员变量
- 添加 `onThemeChanged()` 方法
- 添加主题变化信号连接

### 第2步：修改 screenshotselector.cpp
- 引入主题管理器
- 在构造函数中连接主题变化信号
- 实现 `onThemeChanged()` 方法
- 更新 `paintEvent()` 和 `drawSelectionRect()` 使用主题颜色
- 为5个主题定义对应的颜色方案

### 第3步：修改 clickcapturewidget.h
- 添加主题管理器成员变量
- 添加 `onThemeChanged()` 方法
- 添加主题变化信号连接

### 第4步：修改 clickcapturewidget.cpp
- 引入主题管理器
- 在构造函数中连接主题变化信号
- 实现 `onThemeChanged()` 方法
- 更新 `paintEvent()` 使用主题颜色
- 为5个主题定义对应的颜色方案

### 第5步：修改 recognitionoverlay.h
- 添加主题管理器成员变量
- 添加 `onThemeChanged()` 方法
- 添加主题变化信号连接

### 第6步：修改 recognitionoverlay.cpp
- 引入主题管理器
- 在构造函数中连接主题变化信号
- 实现 `onThemeChanged()` 方法
- 更新 `paintEvent()` 使用主题颜色
- 为5个主题定义对应的颜色方案

### 第7步：修改 framelesswindow.h
- 添加主题管理器成员变量
- 添加 `onThemeChanged()` 方法
- 添加主题变化信号连接

### 第8步：修改 framelesswindow.cpp
- 引入主题管理器
- 在构造函数中连接主题变化信号
- 实现 `onThemeChanged()` 方法
- 更新 `createTitleBar()` 使用主题颜色
- 更新 `drawShadow()` 使用主题颜色
- 为5个主题定义对应的颜色方案

### 第9步：测试编译
- 编译项目确保无错误
- 运行程序测试主题切换
- 验证所有UI元素正确响应主题变化

## 预期效果

- ✅ 截图选择器使用主题颜色
- ✅ 点击捕获窗口使用主题颜色
- ✅ 识别覆盖层使用主题颜色
- ✅ 无边框窗口使用主题颜色
- ✅ 所有UI元素在主题切换时同步更新
- ✅ 5个主题（浅色、深色、樱花、科技、暖色）完整支持