# UI界面优化完整解决方案

## 问题分析

1. **主题配置未保存** - ConfigManager中没有主题相关的保存/加载
2. **UI需要macOS风格美化** - 需要重新设计整体UI样式
3. **控件主题适配不完整** - QLabel、QSpinBox等控件颜色未正确适配
4. **关闭行为未应用** - closeBehaviorCombo没有连接到保存逻辑
5. **悬浮窗配置未保存** - FloatingWindow的配置未持久化
6. **用户设置未完整保存** - 部分UI控件未实现保存/加载
7. **无边框窗口设计丑陋** - 需要重新设计FramelessWindow
8. **按钮大小不一致** - startButton和stopButton大小不匹配

## 实施计划

### 阶段1：ConfigManager配置管理增强
1. 在ConfigManager中添加主题配置相关方法（getTheme、setTheme）
2. 在ConfigManager中添加悬浮窗配置相关方法（悬浮窗位置、大小等）
3. 在initDefaultConfig中初始化新配置项
4. 在loadConfig中加载主题和悬浮窗配置
5. 在saveConfig中保存主题和悬浮窗配置

### 阶段2：MainWindow配置保存/加载完善
1. 在loadConfigToUI中添加主题配置加载
2. 在loadConfigToUI中添加关闭行为加载
3. 在saveConfigFromUI中添加主题配置保存
4. 在saveConfigFromUI中添加关闭行为保存
5. 连接closeBehaviorCombo的currentIndexChanged信号到保存逻辑

### 阶段3：主题样式系统完善
1. 检查并修复thememanager.cpp中所有主题的QLabel、QSpinBox、QComboBox、QLineEdit、QGroupBox样式
2. 确保所有控件在浅色、深色、科技、樱花主题下都有正确的文字和背景颜色
3. 添加QLabel的hover和focus状态样式
4. 统一所有主题的配色方案

### 阶段4：macOS风格UI美化
1. 重新设计FramelessWindow的标题栏样式（macOS风格的圆角、阴影、毛玻璃效果）
2. 优化按钮样式（圆角、渐变、悬停效果）
3. 优化输入框样式（macOS风格的边框和焦点效果）
4. 优化GroupBox样式（macOS风格的圆角和标题样式）
5. 添加macOS风格的窗口阴影和模糊效果

### 阶段5：按钮大小统一
1. 修改mainwindow.ui中startButton的minimumSize为(120, 40)
2. 确保startButton和stopButton大小一致

### 阶段6：编译测试
1. 运行qmake生成Makefile
2. 运行mingw32-make编译项目
3. 修复所有编译错误和警告

## 预期效果
- ✅ 主题配置正确保存和加载
- ✅ UI界面呈现macOS风格
- ✅ 所有控件颜色正确适配主题切换
- ✅ 关闭行为选项正确应用
- ✅ 悬浮窗配置正确保存和加载
- ✅ 所有用户设置项完整保存
- ✅ 无边框窗口美观现代
- ✅ 按钮大小统一一致
- ✅ 项目编译成功无错误