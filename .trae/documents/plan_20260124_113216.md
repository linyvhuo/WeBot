# UI界面优化修复计划

## 问题分析

根据您的需求，需要进行以下5个方面的修复：

### 1. QLineEdit、QSpinBox、QGroupBox 主题适配
当前这些控件在 mainwindow.ui 中有硬编码的样式，需要让它们跟随主题变化。

### 2. 删除关于作者页面的主题设置，移动截图快捷键到高级设置
- 删除 aboutTab 中的 themeGroup（主题设置GroupBox）
- 将 screenshotShortcutLayout 从基础设置页面移动到高级设置页面

### 3. 修复无边框窗口圆角问题
当前 framelesswindow.cpp 中整个窗口都是圆角，导致与下方窗口连接处有空缺。需要改为上半部分圆角，下半部分直角。

### 4. 添加关闭行为选项
- 在 ConfigManager 中添加关闭行为配置（最小化到托盘/直接关闭）
- 在高级设置页面添加关闭行为选项
- 修改 closeEvent 逻辑，根据配置决定行为
- 首次运行时弹窗提示用户设置关闭行为

### 5. 编译测试
每次修改后自动编译并修复所有错误。

## 修复步骤

### 第1步：修改 thememanager.cpp 添加控件主题样式
- 为 QLineEdit、QSpinBox、QGroupBox 添加5个主题的样式定义
- 更新 getLightThemeStyle() 等方法，包含这些控件的样式

### 第2步：修改 mainwindow.ui
- 删除 aboutTab 中的 themeGroup（主题设置GroupBox）
- 将 screenshotShortcutLayout 从 basicTab 移动到 advancedTab

### 第3步：修改 framelesswindow.cpp
- 修改 paintEvent()，改为上半部分圆角，下半部分直角
- 修改 drawShadow()，适配新的窗口形状

### 第4步：修改 configmanager.h
- 添加 getCloseBehavior() 方法
- 添加 setCloseBehavior() 方法
- 添加枚举类型 CloseBehavior（MinimizeToTray、CloseDirectly）

### 第5步：修改 configmanager.cpp
- 实现 getCloseBehavior() 方法
- 实现 setCloseBehavior() 方法
- 在 loadConfig() 中加载关闭行为配置
- 在 saveConfig() 中保存关闭行为配置

### 第6步：修改 mainwindow.ui
- 在 advancedTab 中添加关闭行为选项（QComboBox或QRadioButton）

### 第7步：修改 mainwindow.cpp
- 修改 closeEvent()，根据配置决定是隐藏到托盘还是直接关闭
- 添加首次运行时弹窗提示用户设置关闭行为的逻辑

### 第8步：编译测试
- 编译项目
- 修复所有编译错误
- 确保无警告

## 预期效果

- ✅ QLineEdit、QSpinBox、QGroupBox 跟随主题变色
- ✅ 关于作者页面更简洁，无重复的主题设置
- ✅ 截图快捷键在高级设置页面，更合理
- ✅ 无边框窗口上半部分圆角，下半部分直角，无空缺
- ✅ 用户可以选择关闭行为（最小化到托盘/直接关闭）
- ✅ 首次运行时提示用户设置关闭行为
- ✅ 所有修改编译通过，无错误无警告