# WeBot 项目改进计划

## 一、修复主题按钮点击无反应问题

### 问题分析
在 `mainwindow.cpp` 第221行，构造函数末尾直接调用了 `setStyleSheet(techStyle)`，这会覆盖掉ThemeManager设置的主题样式，导致主题切换失效。

### 解决方案
1. **移除MainWindow构造函数中的硬编码样式表**（第165-221行）
   - 删除 `techStyle` 字符串定义
   - 删除 `setStyleSheet(techStyle)` 调用

2. **确保ThemeManager正确应用主题**
   - 在构造函数中，初始化后立即应用当前主题
   - 使用 `ThemeManager::getInstance()->applyTheme(ThemeManager::getInstance()->getCurrentTheme())`

3. **验证主题切换流程**
   - 确保信号连接正确（第138行已连接）
   - 确保槽函数正确调用ThemeManager（第1595行已实现）

## 二、美化UI界面

### 2.1 优化主窗口样式
1. **增强窗口视觉效果**
   - 添加窗口阴影效果
   - 优化窗口圆角和边框
   - 添加渐变背景效果

2. **改进控件样式**
   - 优化按钮的悬停和点击效果
   - 改进输入框的焦点状态
   - 优化进度条动画效果

3. **统一主题样式**
   - 确保所有主题都有一致的视觉风格
   - 添加主题切换动画效果
   - 优化深色主题的可读性

### 2.2 优化截图选择器界面
1. **改进选择框样式**
   - 使用更现代的边框样式（虚线、发光效果）
   - 添加半透明遮罩层
   - 优化角标记的视觉效果

2. **增强提示信息**
   - 显示当前选择区域尺寸
   - 添加操作提示快捷键
   - 优化文字样式和位置

## 三、完善截图功能

### 3.1 增强截图预览窗口
1. **添加更多操作按钮**
   - 📝 编辑截图（打开图片编辑器）
   - 🎨 绘制标注（添加箭头、文字、形状）
   - ✂️ 裁剪截图（重新选择区域）
   - 🔍 放大预览（全屏查看）
   - 📤 发送到微信（直接发送）
   - 🗑️ 删除截图（取消并删除临时文件）

2. **改进预览界面**
   - 添加缩放功能（鼠标滚轮）
   - 添加拖拽查看功能
   - 显示截图详细信息（尺寸、大小、格式）
   - 添加最近截图历史记录

### 3.2 添加截图编辑功能
1. **创建简单的图片编辑器**
   - 添加画笔工具（颜色、粗细选择）
   - 添加文字工具（字体、大小、颜色）
   - 添加形状工具（矩形、圆形、箭头）
   - 添加橡皮擦工具
   - 添加撤销/重做功能

2. **实现标注功能**
   - 支持添加箭头标注
   - 支持添加文字说明
   - 支持添加矩形/圆形框选
   - 支持调整标注位置和样式

### 3.3 优化截图工作流
1. **添加快捷操作**
   - 截图后自动复制到剪贴板（可配置）
   - 支持快速保存到指定目录
   - 支持截图后直接打开编辑器

2. **添加截图历史**
   - 保存最近10张截图
   - 支持从历史记录中恢复
   - 支持批量导出历史截图

## 四、实施步骤

### 第一阶段：修复主题问题（优先级：高）
1. 修改 `mainwindow.cpp` 构造函数
2. 测试主题切换功能
3. 验证所有主题都能正确应用

### 第二阶段：美化UI界面（优先级：中）
1. 优化ThemeManager中的样式定义
2. 改进主窗口视觉效果
3. 优化控件样式和交互效果
4. 测试所有主题的显示效果

### 第三阶段：完善截图功能（优先级：中）
1. 扩展截图预览窗口
2. 添加截图编辑功能
3. 实现截图历史记录
4. 测试截图工作流

## 五、预期效果

- ✅ 主题切换功能正常工作
- ✅ UI界面更加现代化和美观
- ✅ 截图功能更加完善和实用
- ✅ 用户体验显著提升
- ✅ 代码结构更加清晰和可维护